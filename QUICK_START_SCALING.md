# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –≤–µ—Ä—Å–∏–∏

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:
- Jobs –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- Rate Limiting (60 req/min)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MySQL –∏ PostgreSQL

---

## üöÄ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (3 —à–∞–≥–∞):

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ worker –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π:

```bash
php artisan queue:work --queue=telegram,telegram-commands,telegram-callbacks
```

**–î–µ—Ä–∂–∏—Ç–µ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω–Ω—ã–º!** (–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–æ–º–∞–Ω–¥)

---

### 2. –í—Å—ë! –ë–æ—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/tasks` –≤ –±–æ—Ç–µ ‚Äî –æ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç—Å—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ.

---

### 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–ª—è production ‚Äî –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Supervisor

–°–º. –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ `SCALING_GUIDE.md`

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
```bash
tail -f storage/logs/telegram.log
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–µ—Ä–µ–¥—å:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
php artisan queue:work --once

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å failed jobs
php artisan queue:failed

# –ü–æ–≤—Ç–æ—Ä–∏—Ç—å failed jobs
php artisan queue:retry all
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env:

### –¢–µ–∫—É—â–∞—è (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞):
```env
QUEUE_CONNECTION=database
CACHE_DRIVER=file
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production:
```env
QUEUE_CONNECTION=redis
CACHE_DRIVER=redis
```

---

## üìä –ß—Ç–æ —É–ª—É—á—à–∏–ª–æ—Å—å:

| –î–æ | –ü–æ—Å–ª–µ |
|----|-------|
| –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–º–µ–¥–ª–µ–Ω–Ω–æ) | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è (–±—ã—Å—Ç—Ä–æ) |
| –ù–µ—Ç retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö | 3 –ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ |
| –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è | –ö–µ—à –ø—Ä–æ–µ–∫—Ç–æ–≤/–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ |
| –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ù–µ—Ç rate limiting | 60 req/min |
| –¢–æ–ª—å–∫–æ MySQL | MySQL + PostgreSQL |

---

## ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ, –Ω–æ:

- ‚ö° **–ë—ã—Å—Ç—Ä–µ–µ** ‚Äî webhook –æ—Ç–≤–µ—á–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- üõ°Ô∏è **–ù–∞–¥–µ–∂–Ω–µ–µ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—ã—Å—è—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ worker –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É!** üéâ
